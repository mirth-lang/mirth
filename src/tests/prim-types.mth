module(prim-types)

def(int-lit, Int, 10)
def(str-lit, Ptr, "Hello")
def(prim-dup, a -- a a, dup)
def(prim-drop, a --, drop)
def(prim-swap, a b -- b a, swap)
def(prim-dip-1, a b c -- a c, dip(drop))
def(prim-dip-2, a b c -- a b b c, dip(dup))
def(prim-dip-3, a b c -- b a c, dip(swap))
def(prim-if-1, Int Int Bool -- Int, if(+, -))
def(prim-if-2, Int Ptr Bool -- Ptr, if(prim.unsafe.ptr+, dip(drop)))
def(prim-while-1, Int, 0 10 while(dup 0 swap <, dup dip(+) 1 -) drop)
def(prim-while-2, Int -- Int, while(true, id))
def(prim-debug, *a -- *a, ??)
def(prim-cast, a -- b, prim.unsafe.cast)

def(prim-int-add, Int Int -- Int, +)
def(prim-int-sub, Int Int -- Int, -)
def(prim-int-mul, Int Int -- Int, *)
def(prim-int-div, Int Int -- Int, /)
def(prim-int-mod, Int Int -- Int, %)
def(prim-int-and, Int Int -- Int, &)
def(prim-int-or, Int Int -- Int, |)
def(prim-int-xor, Int Int -- Int, ^)
def(prim-int-shl, Int Int -- Int, <<)
def(prim-int-shr, Int Int -- Int, >>)
def(prim-int-eq, Int Int -- Bool, =)
def(prim-int-lt, Int Int -- Bool, <)
def(prim-int-le, Int Int -- Bool, <=)

def(prim-bool-true, Bool, true)
def(prim-bool-false, Bool, false)
def(prim-bool-and, Bool Bool -- Bool, &&)
def(prim-bool-or, Bool Bool -- Bool, ||)

def(prim-ptr-add, Int Ptr -- Ptr, prim.unsafe.ptr+)
def(prim-ptr-size, Int, prim.unsafe.|ptr|)

def(prim-mem-get, Ptr -- Int, @)
def(prim-mem-set, Int Ptr --, !)
def(prim-mem-get-u8, Ptr -- U8, u8@)
def(prim-mem-get-u16, Ptr -- U16, u16@)
def(prim-mem-get-u32, Ptr -- U32, u32@)
def(prim-mem-get-u64, Ptr -- U64, u64@)
def(prim-mem-set-u8, U8 Ptr --, u8!)
def(prim-mem-set-u16, U16 Ptr --, u16!)
def(prim-mem-set-u32, U32 Ptr --, u32!)
def(prim-mem-set-u64, U64 Ptr --, u64!)
def(prim-mem-get-i8, Ptr -- I8, i8@)
def(prim-mem-get-i16, Ptr -- I16, i16@)
def(prim-mem-get-i32, Ptr -- I32, i32@)
def(prim-mem-get-i64, Ptr -- I64, i64@)
def(prim-mem-set-i8, I8 Ptr --, i8!)
def(prim-mem-set-i16, I16 Ptr --, i16!)
def(prim-mem-set-i32, I32 Ptr --, i32!)
def(prim-mem-set-i64, I64 Ptr --, i64!)

target-c99("prim-types.c", id)
