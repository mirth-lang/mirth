module(mirth.data.var)

import(prelude)
import(mirth.data.name)
import(mirth.data.type)

#######
# VAR #
#######

# mirth/data/var
table(Var)
field(var-is-implicit, Var, Bool)
field(var-name, Var, Name)
field(var-type, Var, Type)
field(var-auto-run, Var, Bool) # run variable by default

def(var-new!, Name -- Var,
    Var.alloc!
    tuck var-name !
    F over var-auto-run !)

def(var-new-implicit!, Name -- Var,
    var-new!
    T over var-is-implicit !)

def(var-is-physical, Var -- Bool,
    var-type @ type-is-physical)
