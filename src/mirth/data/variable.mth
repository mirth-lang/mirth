module(mirth.data.variable)

import(prelude)
import(mirth.data.name)
import(mirth.data.def)

table(Variable)
field(variable-head, Variable, Token)
field(variable-name, Variable, Name)
field(variable-type, Variable, Lazy(Type))

def(variable-new!, Token Name Lazy(Type) -- Variable,
    Variable.alloc!
    tuck variable-type !
    tuck dup2 variable-name !
    DEF_VARIABLE swap ~Def !
    tuck variable-head !)
