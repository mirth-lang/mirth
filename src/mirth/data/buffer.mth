module(mirth.data.buffer)

import(prelude)
import(mirth.data.name)
import(mirth.data.def)

# mirth/data/buffer
table(Buffer)
field(buffer-head, Buffer, Token)
field(buffer-size, Buffer, Size)
field(buffer-name, Buffer, Name)

def(buffer-new!, Token Name Size -- Buffer,
    Buffer.alloc!
    tuck buffer-size !
    tuck dup2 buffer-name !
    DEF_BUFFER swap name-def !
    tuck buffer-head !)
